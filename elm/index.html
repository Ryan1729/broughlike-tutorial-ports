<canvas></canvas>
<script>
    canvas = document.querySelector("canvas");
    ctx = canvas.getContext("2d");
</script>
<script type="text/javascript" src="elm.js"></script>
<script type="text/javascript">
var app = Elm.Main.init({
    node: document.createElement("dummy"),
    flags: {}
});

const actions = {
    "draw": ({x, y}) => {
        ctx.fillRect(x*20,y*20,20,20);
    },
}

app.ports.platform.subscribe((commands) => {
    for (var i = 0; i < commands.length; i += 1) {
        const command = commands[i];
        const action = actions[command.kind];
        if (action) {
            action(command)
        } else {
            console.error(`Unknown command kind: "${command.kind}"`)
        }
    }
});
</script>
